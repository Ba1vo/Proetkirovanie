{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport AuthService from '../services/authService';\nconst initialState = {\n  user: null,\n  loading: false\n};\nexport const register = createAsyncThunk('auth/register', async (user, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  try {\n    const data = await AuthService.register(user);\n    localStorage.setItem('token', data.access);\n    return data.user;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const login = createAsyncThunk('auth/login', async (user, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const data = await AuthService.login(user);\n    localStorage.setItem('token', data.access);\n    return data.user;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const checkAuth = createAsyncThunk('auth/checkAuth', async () => {\n  const data = await AuthService.checkAuth();\n  localStorage.setItem('token', data.access);\n  return data.user;\n});\nexport const logout = createAsyncThunk('auth/logout', async () => {\n  await AuthService.logout();\n  localStorage.removeItem('token');\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: builder => {\n    builder.addCase(register.pending, state => {\n      state.loading = true;\n    }).addCase(register.fulfilled, (state, action) => {\n      state.user = action.payload;\n      state.loading = false;\n    }).addCase(register.rejected, state => {\n      state.loading = false;\n    }).addCase(login.pending, state => {\n      state.loading = true;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.user = action.payload;\n      state.loading = false;\n    }).addCase(login.rejected, state => {\n      state.loading = false;\n    }).addCase(logout.fulfilled, state => {\n      state.user = null;\n    }).addCase(checkAuth.fulfilled, (state, action) => {\n      state.user = action.payload;\n    });\n  }\n});\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","AuthService","initialState","user","loading","register","_ref","rejectWithValue","data","localStorage","setItem","access","error","response","login","_ref2","checkAuth","logout","removeItem","authSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","reducer"],"sources":["C:/Users/1/Proetkirovanie/ui/src/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\nimport AuthService from '../services/authService'\n\nconst initialState = {\n  user: null,\n  loading: false,\n}\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (user, { rejectWithValue }) => {\n    try {\n      const data = await AuthService.register(user)\n      localStorage.setItem('token', data.access)\n      return data.user\n    } catch (error) {\n      return rejectWithValue(error.response.data)\n    }\n  }\n)\n\nexport const login = createAsyncThunk(\n  'auth/login',\n  async (user, { rejectWithValue }) => {\n    try {\n      const data = await AuthService.login(user)\n      localStorage.setItem('token', data.access)\n      return data.user\n    } catch (error) {\n      return rejectWithValue(error.response.data)\n    }\n  }\n)\n\nexport const checkAuth = createAsyncThunk('auth/checkAuth', async () => {\n  const data = await AuthService.checkAuth()\n  localStorage.setItem('token', data.access)\n  return data.user\n})\n\nexport const logout = createAsyncThunk('auth/logout', async () => {\n  await AuthService.logout()\n  localStorage.removeItem('token')\n})\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: (builder) => {\n    builder\n      .addCase(register.pending, (state) => {\n        state.loading = true\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.user = action.payload\n        state.loading = false\n      })\n      .addCase(register.rejected, (state) => {\n        state.loading = false\n      })\n      .addCase(login.pending, (state) => {\n        state.loading = true\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.user = action.payload\n        state.loading = false\n      })\n      .addCase(login.rejected, (state) => {\n        state.loading = false\n      })\n      .addCase(logout.fulfilled, (state) => {\n        state.user = null\n      })\n      .addCase(checkAuth.fulfilled, (state, action) => {\n        state.user = action.payload\n      })\n  },\n})\n\nexport default authSlice.reducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}