{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/1/Proetkirovanie/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/1/Proetkirovanie/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';//import { register } from '../../../slices/authSlice'\nimport{EmailField,PasswordField}from'../../form-fields';import LoadingButton from'../../LoadingButton';import BaseForm from'../BaseForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegistrationForm=function RegistrationForm(_ref){var setServerError=_ref.setServerError;var dispatch=useDispatch();var loading=useSelector(function(state){return state.auth.loading;});var navigate=useNavigate();var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,setError){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:try{//await dispatch(register(user)).unwrap()\nnavigate('/');}catch(error){if(error.detail){setError('email',{type:'custom',message:error.detail});}else{setServerError('Непредвиденная ошибка');}}case 1:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(BaseForm,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(EmailField,{name:\"email\",placeholder:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430\",required:true}),/*#__PURE__*/_jsx(PasswordField,{name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",required:true}),/*#__PURE__*/_jsx(LoadingButton,{type:\"submit\",loading:loading,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]});};export default RegistrationForm;","map":{"version":3,"names":["useDispatch","useSelector","useNavigate","EmailField","PasswordField","LoadingButton","BaseForm","jsx","_jsx","jsxs","_jsxs","RegistrationForm","_ref","setServerError","dispatch","loading","state","auth","navigate","onSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","setError","wrap","_callee$","_context","prev","next","error","detail","type","message","stop","_x","_x2","apply","arguments","children","name","placeholder","required"],"sources":["C:/Users/1/Proetkirovanie/ui/src/components/forms/RegistrationForm/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\n\n//import { register } from '../../../slices/authSlice'\nimport { EmailField, PasswordField } from '../../form-fields'\nimport LoadingButton from '../../LoadingButton'\nimport BaseForm from '../BaseForm'\n\nconst RegistrationForm = ({ setServerError }) => {\n  const dispatch = useDispatch()\n  const loading = useSelector((state) => state.auth.loading)\n  const navigate = useNavigate()\n\n  const onSubmit = async (user, setError) => {\n    try {\n      //await dispatch(register(user)).unwrap()\n      navigate('/')\n    } catch (error) {\n      if (error.detail) {\n        setError('email', { type: 'custom', message: error.detail })\n      } else {\n        setServerError('Непредвиденная ошибка')\n      }\n    }\n  }\n\n  return (\n    <BaseForm onSubmit={onSubmit}>\n      <EmailField name='email' placeholder='Электронная почта' required />\n      <PasswordField name='password' placeholder='Пароль' required />\n      <LoadingButton type='submit' loading={loading}>\n        Зарегистрироваться\n      </LoadingButton>\n    </BaseForm>\n  )\n}\n\nRegistrationForm.propTypes = {\n  setServerError: PropTypes.func,\n}\n\nexport default RegistrationForm\n"],"mappings":"oPACA,OAASA,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C;AACA,OAASC,UAAU,CAAEC,aAAa,KAAQ,mBAAmB,CAC7D,MAAO,CAAAC,aAAa,KAAM,qBAAqB,CAC/C,MAAO,CAAAC,QAAQ,KAAM,aAAa,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAAC,IAAA,CAA2B,IAArB,CAAAC,cAAc,CAAAD,IAAA,CAAdC,cAAc,CACxC,GAAM,CAAAC,QAAQ,CAAGd,WAAW,EAAE,CAC9B,GAAM,CAAAe,OAAO,CAAGd,WAAW,CAAC,SAACe,KAAK,QAAK,CAAAA,KAAK,CAACC,IAAI,CAACF,OAAO,GAAC,CAC1D,GAAM,CAAAG,QAAQ,CAAGhB,WAAW,EAAE,CAE9B,GAAM,CAAAiB,QAAQ,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,IAAI,CAAEC,QAAQ,SAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACpC,GAAI,CACF;AACAb,QAAQ,CAAC,GAAG,CAAC,CACf,CAAE,MAAOc,KAAK,CAAE,CACd,GAAIA,KAAK,CAACC,MAAM,CAAE,CAChBP,QAAQ,CAAC,OAAO,CAAE,CAAEQ,IAAI,CAAE,QAAQ,CAAEC,OAAO,CAAEH,KAAK,CAACC,MAAO,CAAC,CAAC,CAC9D,CAAC,IAAM,CACLpB,cAAc,CAAC,uBAAuB,CAAC,CACzC,CACF,CAAC,wBAAAgB,QAAA,CAAAO,IAAA,MAAAZ,OAAA,GACF,kBAXK,CAAAL,QAAQA,CAAAkB,EAAA,CAAAC,GAAA,SAAAlB,KAAA,CAAAmB,KAAA,MAAAC,SAAA,OAWb,CAED,mBACE9B,KAAA,CAACJ,QAAQ,EAACa,QAAQ,CAAEA,QAAS,CAAAsB,QAAA,eAC3BjC,IAAA,CAACL,UAAU,EAACuC,IAAI,CAAC,OAAO,CAACC,WAAW,CAAC,mGAAmB,CAACC,QAAQ,OAAG,cACpEpC,IAAA,CAACJ,aAAa,EAACsC,IAAI,CAAC,UAAU,CAACC,WAAW,CAAC,sCAAQ,CAACC,QAAQ,OAAG,cAC/DpC,IAAA,CAACH,aAAa,EAAC6B,IAAI,CAAC,QAAQ,CAACnB,OAAO,CAAEA,OAAQ,CAAA0B,QAAA,CAAC,8GAE/C,EAAgB,GACP,CAEf,CAAC,CAMD,cAAe,CAAA9B,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}