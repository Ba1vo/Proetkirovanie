{"ast":null,"code":"import axios from 'axios';\nconst HOST_URL = 'http://localhost:83';\nconst API_URL = `${HOST_URL}/api`;\nconst publicApi = axios.create({\n  baseURL: API_URL\n});\nconst withCredentialsApi = axios.create({\n  baseURL: API_URL,\n  withCredentials: true\n});\nconst authApi = axios.create({\n  withCredentials: true,\n  baseURL: API_URL\n});\n\n//authApi.interceptors.request.use((config) => {\n//config.headers.Authorization = `JWT ${localStorage.getItem('token')}`\n//return config\n//})\n\nauthApi.interceptors.response.use(config => {\n  return config;\n}, async error => {\n  const originalReq = error.config;\n  if (error.response.status === 401 && error.config && !error.config._isRetry) {\n    originalReq._isRetry = true;\n    try {\n      const res = await authApi.post('/api/refresh');\n      return authApi.request(originalReq);\n    } catch (error) {\n      throw error;\n    }\n  }\n  throw error;\n});\nexport { HOST_URL, API_URL, publicApi, withCredentialsApi, authApi };","map":{"version":3,"names":["axios","HOST_URL","API_URL","publicApi","create","baseURL","withCredentialsApi","withCredentials","authApi","interceptors","response","use","config","error","originalReq","status","_isRetry","res","post","request"],"sources":["C:/Users/1/Proetkirovanie/ui/src/api/index.js"],"sourcesContent":["import axios from 'axios'\n\nconst HOST_URL = 'http://localhost:83'\nconst API_URL = `${HOST_URL}/api`\n\nconst publicApi = axios.create({\n  baseURL: API_URL,\n})\n\nconst withCredentialsApi = axios.create({\n  baseURL: API_URL,\n  withCredentials: true,\n})\n\nconst authApi = axios.create({\n  withCredentials: true,\n  baseURL: API_URL,\n})\n\n//authApi.interceptors.request.use((config) => {\n  //config.headers.Authorization = `JWT ${localStorage.getItem('token')}`\n  //return config\n//})\n\nauthApi.interceptors.response.use(\n  (config) => {\n    return config\n  },\n  async (error) => {\n    const originalReq = error.config\n    if (\n      error.response.status === 401 &&\n      error.config &&\n      !error.config._isRetry\n    ) {\n      originalReq._isRetry = true\n      try {\n        const res = await authApi.post('/api/refresh')\n        return authApi.request(originalReq)\n      } catch (error) {\n        throw error\n      }\n    }\n    throw error\n  }\n)\n\nexport { HOST_URL, API_URL, publicApi, withCredentialsApi, authApi }\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,qBAAqB;AACtC,MAAMC,OAAO,GAAI,GAAED,QAAS,MAAK;AAEjC,MAAME,SAAS,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC7BC,OAAO,EAAEH;AACX,CAAC,CAAC;AAEF,MAAMI,kBAAkB,GAAGN,KAAK,CAACI,MAAM,CAAC;EACtCC,OAAO,EAAEH,OAAO;EAChBK,eAAe,EAAE;AACnB,CAAC,CAAC;AAEF,MAAMC,OAAO,GAAGR,KAAK,CAACI,MAAM,CAAC;EAC3BG,eAAe,EAAE,IAAI;EACrBF,OAAO,EAAEH;AACX,CAAC,CAAC;;AAEF;AACE;AACA;AACF;;AAEAM,OAAO,CAACC,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC9BC,MAAM,IAAK;EACV,OAAOA,MAAM;AACf,CAAC,EACD,MAAOC,KAAK,IAAK;EACf,MAAMC,WAAW,GAAGD,KAAK,CAACD,MAAM;EAChC,IACEC,KAAK,CAACH,QAAQ,CAACK,MAAM,KAAK,GAAG,IAC7BF,KAAK,CAACD,MAAM,IACZ,CAACC,KAAK,CAACD,MAAM,CAACI,QAAQ,EACtB;IACAF,WAAW,CAACE,QAAQ,GAAG,IAAI;IAC3B,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMT,OAAO,CAACU,IAAI,CAAC,cAAc,CAAC;MAC9C,OAAOV,OAAO,CAACW,OAAO,CAACL,WAAW,CAAC;IACrC,CAAC,CAAC,OAAOD,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF;EACA,MAAMA,KAAK;AACb,CAAC,CACF;AAED,SAASZ,QAAQ,EAAEC,OAAO,EAAEC,SAAS,EAAEG,kBAAkB,EAAEE,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}